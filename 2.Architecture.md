# CopilotKit Architecture

This document outlines the conceptual architecture of CopilotKit and maps it to the structure of this repository.

## Conceptual Architectural Layers

CopilotKit applications can be understood as having several conceptual layers that work together to deliver AI-powered assistance.

1.  **Frontend Layer**:
    *   **Responsibilities**: This layer is responsible for the user interface and user experience. It captures user input, displays information, and renders AI-driven components. It interacts with the backend/application logic layer to send user queries and receive AI responses or actions.
    *   **Key Technologies**: Primarily React for building interactive UIs.
    *   **Relevant CopilotKit Packages**:
        *   `@copilotkit/react-core`: Provides the fundamental React components, hooks, and context for integrating CopilotKit functionalities into a React application.
        *   `@copilotkit/react-ui`: Offers pre-built, customizable UI components (like popups, sidebars, chat interfaces) to quickly assemble a copilot interface.
        *   `@copilotkit/react-textarea`: Delivers an enhanced textarea component with features like AI-powered autocompletion and inline actions.

2.  **Backend/Application Logic Layer (JavaScript/TypeScript)**:
    *   **Responsibilities**: This layer, typically running on Node.js, handles communication with Large Language Models (LLMs), manages application-specific logic, and executes actions defined within the application context. It processes requests from the frontend, orchestrates LLM interactions, and can perform tasks directly or delegate to other services.
    *   **Key Technologies**: Node.js, Express.js (or other Node.js frameworks).
    *   **Relevant CopilotKit Packages**:
        *   `@copilotkit/runtime`: Provides the server-side runtime environment for JavaScript/TypeScript-based copilots. It handles LLM communication, action execution, and state management for these in-app agents.

3.  **Agent Service Layer (Python/Polyglot)**:
    *   **Responsibilities**: For more complex or specialized agentic logic, this layer comes into play. It's designed for building sophisticated agents that might require extensive external service integrations, complex state management, or leverage Python-specific AI/ML libraries. These agents often run as separate services.
    *   **Key Technologies**: Python is a primary technology here, often utilizing frameworks like LangGraph for building stateful, multi-actor applications, or CrewAI for orchestrating autonomous AI agents. However, this layer can be polyglot.
    *   **Relevant CopilotKit Packages**:
        *   `copilotkit` (Python SDK): Enables the development of agents in Python that can be integrated with the CopilotKit ecosystem. It provides tools for defining actions, handling state, and communicating with the CopilotKit frontend/runtime.

4.  **AI Service Abstraction Layer**:
    *   **Purpose**: This layer abstracts the specifics of interacting with various LLM providers (e.g., OpenAI, Anthropic, Google Gemini). Its goal is to provide a consistent interface for sending requests and receiving responses from different models, making it easier to switch or use multiple LLMs.
    *   **How it's achieved**: This is primarily achieved through service adapters implemented within both `@copilotkit/runtime` (for JS/TS backends) and the `copilotkit` Python SDK. These adapters handle the specific API requirements and authentication mechanisms of each supported LLM provider.

## Repository Folder Structure Mapping

The CopilotKit monorepo is organized to reflect these architectural layers and other project roles:

*   **`CopilotKit/`**: The main monorepo containing the core JavaScript/TypeScript packages.
    *   `CopilotKit/packages/`: Houses the core SDKs.
        *   `react-core/`: **Frontend Layer** - Contains core React components, hooks, and context for CopilotKit.
        *   `react-ui/`: **Frontend Layer** - Provides pre-built, customizable UI components for chat interfaces, popups, etc.
        *   `react-textarea/`: **Frontend Layer** - Offers an enhanced textarea component with AI capabilities.
        *   `runtime/`: **Backend/Application Logic Layer (JS/TS)** - The server-side runtime for handling LLM communication and action execution for JavaScript/TypeScript based copilots.
        *   `shared/`: **Common Utilities** - Contains shared utilities and types used across multiple JS/TS packages.
    *   `CopilotKit/examples/`: Contains various examples demonstrating how to use CopilotKit packages to build in-app copilots, primarily focusing on JS/TS implementations.

*   **`examples/` (top-level)**: This directory hosts more complex or standalone example applications, including those that demonstrate the CoAgent architecture (multi-layer, often polyglot agents).
    *   `examples/*/ui/`: Typically represents the **Frontend Layer** for the CoAgent examples found in this directory.
    *   `examples/*/agent/`: Typically represents the **Agent Service Layer** for CoAgent examples, often implemented in Python using frameworks like LangGraph or CrewAI, and utilizing the `copilotkit` Python SDK.

*   **`sdk-python/`**: Contains the Python SDK for CopilotKit.
    *   `sdk-python/copilotkit/`: **Agent Service Layer (Python)** - Source code for the Python SDK, enabling developers to build powerful agents in Python that integrate with the CopilotKit ecosystem.

*   **`docs/`**: **Documentation** - Contains the source code and content for the official CopilotKit documentation website (docs.copilotkit.ai).

*   **`infra/`**: **Operational/Deployment Tooling** - Holds Infrastructure-as-Code definitions, currently using AWS CDK, for deploying CopilotKit-related services or examples.

*   **`registry/`**: **Ecosystem/Platform** - Likely related to a planned or existing component and agent registry to share and discover reusable CopilotKit elements.

*   **`.github/`**: **Development/Operational Tooling** - Contains GitHub-specific files, including CI/CD workflow definitions (GitHub Actions), issue templates, pull request templates, and code ownership information.

*   **`assets/`**: **Static Assets** - Stores images, logos, and other static files primarily used in `README.md` files and potentially in the documentation.

*   **`community/`**: **Community Content** - A place for community-contributed demos, examples, and other content.
