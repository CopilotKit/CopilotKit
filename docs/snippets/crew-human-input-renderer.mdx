## Human Input / Results

CopilotKit emits two mutually exclusive events when working with Crews:

- `crew_requesting_feedback` when the Crew is requesting human input/feedback
- `crew_finished` when the Crew is done executing entirely

Use these events to show a custom UI for user input/feedback and handle the final outcome respectively.

```tsx title="main-page.tsx"
import { useCopilotAction } from "@copilotkit/react-core";

const CrewHumanFeedbackRenderer = ({ args, respond, status }) => {
  const [isExpanded, setIsExpanded] = useState(true);
  const [feedback, setFeedback] = useState(null);

  // Render feedback UI based on status
  const renderFeedback = () => {
    if (status === "complete") {
      return <div>{feedback || "Feedback submitted"}</div>;
    }

    if (status === "inProgress" || status === "executing") {
      return (
        <>
          <button
            onClick={() => {
              setFeedback("Approved");
              // Any serializable input
              respond?.("Approve");
            }}
          >
            Approve
          </button>
          <button
            onClick={() => {
              setFeedback("Rejected");
              respond?.("Reject");
            }}
          >
            Reject
          </button>
        </>
      );
    }

    return null;
  };

  return (
    <div>
      {/* Expandable content */}
      {isExpanded && <div>{response.content}</div>}

      <div>
        <div>
          <button onClick={() => setIsExpanded(!isExpanded)}>
            {isExpanded ? "▲" : "▼"}
          </button>
          <span>Response</span>
        </div>

        <div>{renderFeedback()}</div>
      </div>
    </div>
  );
};

const CrewResultRenderer = ({ args, status }) => <pre>{JSON.stringify(args, null, 2)}</>;

export function MainPage() {
  // ...existing code

  // Handle human feedback requests during execution
  useCopilotAction({
    name: "crew_requesting_feedback",
    renderAndWaitForResponse({ args, respond, status }) {
      return (
        <CrewHumanFeedbackRenderer args={args} respond={respond} status={status} />
      );
    },
  });

  // Handle final outcome when crew completes execution
  useCopilotAction({
    name: "crew_finished",
    renderAndWaitForResponse({ args, status }) {
      return <CrewResultRenderer args={args} status={status} />;
    },
  });

  // ...existing code
}
```

Key points:

1. Use `useCopilotAction` to handle human interaction requests
2. Customize the response UI based on the request type
3. Send user feedback back to the agent
4. Handle the final results when the crew is finished executing
