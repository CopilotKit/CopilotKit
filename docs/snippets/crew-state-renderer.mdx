## Stream Agent State

1. Connects to a specific agent by name
2. Renders the agent's state including tools used and tasks completed
3. Provides custom rendering for different types of state items

```tsx title="main-page.tsx"
import {
  useCoAgentStateRender,
  CrewsToolStateItem,
  CrewsTaskStateItem,
  CrewsStateItemRendererProps,
} from "@copilotkit/react-core";

export const AgentStateRender = ({ state, status }) => {
  if (!state) return <div>Loading...</div>;

  const items = [...(state.steps || []), ...(state.tasks || [])];
  if (items.length === 0) return <div>No activity</div>;

  return (
    <div>
      {items.map((item) => (
        <div key={item.id}>
          <p>{item.tool || item.name}</p>
          {item.thought && <p>{item.thought}</p>}
          {item.result && <p>{JSON.stringify(item.result)}</p>}
        </div>
      ))}
    </div>
  );
};

export function MainPage() {
  // ...existing code
  useCoAgentStateRender({
    name: "your_crew_agent",
    render: ({ state, status }) => (
      <AgentStateRender state={state} status={status} />
    ),
  });

  // ...existing code
}
```

Key points:

1. Use `useCoAgentStateRender` to subscribe to state updates
2. Render different types of state items (tools and tasks)
3. Display thought process and results in real-time

> **Note:** Replace `name` with your agent name. It must match with what you registered in Copilot Cloud.
