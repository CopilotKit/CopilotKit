---
title: "Disabling state streaming"
icon: "lucide/Cog"
description: "Granularly control what is streamed to the frontend."
---

## What is this?

By default, Microsoft Agent Framework via AG-UI streams messages, tool calls, and state updates to the frontend automatically. For scenarios where you need to control what data is exposed to the frontend, you can manage this through your agent's state snapshot design and tool implementations.

## When should I use this?

Use selective data exposure when:
- The agent processes sensitive information that shouldn't be visible to users
- You want to hide internal tool calls or reasoning steps
- You need to filter state properties before sending to frontend

## Implementation

### Control State Exposure

Design your state snapshot classes to include only the data you want to expose to the frontend:

```csharp title="Program.cs"
using System.Text.Json.Serialization;

// Public state - safe to send to frontend
public class PublicStateSnapshot
{
    [JsonPropertyName("userVisibleData")]
    public string UserVisibleData { get; set; } = string.Empty;
}

// Internal state - keep on server only
public class InternalState
{
    public string SensitiveData { get; set; } = string.Empty;
    public List<string> InternalMetrics { get; set; } = new();
}

// Tools return only public state
[Description("Perform a task and return public results.")]
static PublicStateSnapshot PerformTask([Description("Task input")] string input)
{
    // Process with internal state
    var internalData = ProcessSensitiveOperation(input);
    
    // Return only public data
    return new PublicStateSnapshot
    {
        UserVisibleData = "Task completed successfully"
    };
}
```

### Control Tool Visibility

To prevent specific tool calls from being rendered on the frontend, simply don't register a corresponding `useCopilotAction` hook for that tool. Only tools with matching frontend action hooks will render custom UI.

```csharp
// Backend tool that won't render in UI (no matching useCopilotAction)
[Description("Internal processing tool.")]
static string InternalProcess([Description("Data to process")] string data)
    => ProcessInternally(data);

// Backend tool that WILL render (if you add useCopilotAction with matching name)
[Description("User-visible operation.")]
static string PublicOperation([Description("User input")] string input)
    => PerformPublicOperation(input);
```

<Callout type="info">
  Streaming control in MAF is primarily managed through what data you choose to return and expose, rather than configuration flags.
</Callout>

