---
title: Workflow-based
description: Learn about Human-in-the-Loop (HITL) in Microsoft Agent Framework workflows.
icon: lucide/Share2
---

<Callout type="info">
    **Microsoft Agent Framework uses different HITL patterns than LangGraph.** For most use cases with CopilotKit, we recommend using [approval-required functions](/microsoft-agent-framework/human-in-the-loop/interrupt-flow) or [frontend tools](/microsoft-agent-framework/human-in-the-loop/frontend-tool-based).
</Callout>

## What is this?

Microsoft Agent Framework provides **Workflow RequestPorts** for complex human-in-the-loop scenarios in multi-agent workflows. These are designed for advanced scenarios where you need structured request-response patterns between agents and external systems.

## When should I use this?

For most web applications with CopilotKit, you should use:
- **[Approval-Required Functions](/microsoft-agent-framework/human-in-the-loop/interrupt-flow)** - Simple approval workflows
- **[Frontend Tools](/microsoft-agent-framework/human-in-the-loop/frontend-tool-based)** - Web-native, flexible HITL with custom UI

Workflow RequestPorts are for advanced scenarios involving:
- Complex multi-agent orchestrations
- Structured request-response cycles
- Workflow-based systems requiring precise control

<Callout type="info">
  Workflow RequestPorts are part of Microsoft Agent Framework's [Workflow system](https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/overview), which is separate from simple agent HITL patterns.
</Callout>

## Workflow RequestPorts Overview

Workflow RequestPorts enable structured human-in-the-loop interactions within Microsoft Agent Framework workflows. They work by:

1. Creating a `RequestPort` that emits `RequestInfoEvent` when input is needed
2. External code (your application) handles the request
3. Sending an `ExternalResponse` back to the workflow to continue execution

### Example Pattern

Here's a simplified conceptual example of how RequestPorts work in MAF workflows:

```csharp
// Create a RequestPort for handling human input
RequestPort numberRequestPort = RequestPort.Create<NumberSignal, int>("GuessNumber");

// In your workflow execution
await foreach (WorkflowEvent evt in handle.WatchStreamAsync())
{
    if (evt is RequestInfoEvent requestEvt)
    {
        // Handle the request (get user input)
        int userInput = GetUserInput(requestEvt.Request);
        
        // Send response back to workflow
        ExternalResponse response = requestEvt.Request.CreateResponse(userInput);
        await handle.SendResponseAsync(response);
    }
}
```

<Callout type="warning">
  **Workflow RequestPorts are advanced features** designed for complex multi-agent orchestrations. For typical CopilotKit applications with AG-UI, use the simpler patterns documented in [Approval-Required Functions](/microsoft-agent-framework/human-in-the-loop/interrupt-flow) or [Frontend Tools](/microsoft-agent-framework/human-in-the-loop/frontend-tool-based).
</Callout>

## Learn More

For detailed information about Workflow RequestPorts and complex workflow patterns:
- [Microsoft Agent Framework Workflows Documentation](https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/overview)
- [Handle Requests and Responses in Workflows](https://learn.microsoft.com/en-us/agent-framework/tutorials/workflows/requests-and-responses)
- [MAF Workflow Samples](https://github.com/microsoft/agent-framework/tree/main/dotnet/samples/GettingStarted/Workflows)

## Recommended Approaches

For CopilotKit + AG-UI applications, we recommend:

<Cards>
  <Card
    title="Approval-Required Functions"
    description="Simple server-side approval for sensitive operations"
    href="/microsoft-agent-framework/human-in-the-loop/interrupt-flow"
  />
  <Card
    title="Frontend Tools"
    description="Web-native HITL with flexible custom UI"
    href="/microsoft-agent-framework/human-in-the-loop/frontend-tool-based"
  />
</Cards>