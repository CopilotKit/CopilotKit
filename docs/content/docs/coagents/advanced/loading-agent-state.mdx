---
title: Loading Agent State
description: Learn how threadId is used to load previous agent states.
---

### Setting the threadId

When setting the `threadId` property in CopilotKit, i.e:

```tsx
<CopilotKit threadId="123">
  <YourApp />
</CopilotKit>
```

CopilotKit will restore the complete state of the thread, including the messages, from the database. (See [Message Persistence](/coagents/advanced/message-persistence) for more details.)

### Loading Agent State

This means that the state of any agent will also be restored. For example:

```tsx
const { state } = useCoAgent({name: "research_agent"});

// state will now be the state of research_agent in thread 123
```

### Learn More

To learn more about persistence and state in CopilotKit, see:

- [Reading agent state](/coagents/react-ui/in-app-agent-read)
- [Writing agent state](/coagents/react-ui/in-app-agent-write)
- [Loading Message History](/coagents/chat-ui/loading-message-history)
