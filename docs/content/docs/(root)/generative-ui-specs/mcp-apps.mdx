---
title: "MCP Apps"
icon: "lucide/Monitor"
description: "Render interactive UI components from MCP servers directly in your chat interface"
---

# MCP Apps

**MCP Apps** extends the Model Context Protocol to enable MCP servers to return rich, interactive UI components that render directly in your chat interface.

## What are MCP Apps?

MCP Apps are MCP servers that expose tools with associated UI resources. When the agent calls one of these tools, CopilotKit automatically fetches and renders the UI component in the chat - no additional frontend code required.

Key benefits:
- **Zero frontend code** - UI components are served by the MCP server
- **Full interactivity** - Components can use HTML, CSS, and JavaScript
- **Secure sandboxing** - Content runs in isolated iframes
- **Direct server communication** - The middleware securely proxies communication between the rendered UI and the MCP server, enabling real-time interactions
- **Thread persistence** - MCP Apps are stored in conversation history and restored on reconnect

## Setup

<Steps>
  <Step>
    ### Install the middleware

    ```bash
    npm install @ag-ui/mcp-apps-middleware
    ```
  </Step>
  <Step>
    ### Configure your agent

    Add the `MCPAppsMiddleware` to your agent with your MCP server configurations:

    ```typescript
    import { BasicAgent } from "@copilotkit/agent";
    import { MCPAppsMiddleware } from "@ag-ui/mcp-apps-middleware";

    const agent = new BasicAgent({
      model: "openai/gpt-4o",
      prompt: "You are a helpful assistant.",
    }).use(new MCPAppsMiddleware({
      mcpServers: [
        {
          type: "http",
          url: "http://localhost:3101/mcp",
          serverId: "my-server" // Recommended: stable identifier
        },
      ],
    }));
    ```

    <Callout type="info" title="Server ID">
      Always provide a `serverId` for production deployments. Without it, CopilotKit generates a hash from the server URL. If your URL changes (e.g., different environments), previously stored MCP Apps in conversation history won't load correctly.
    </Callout>
  </Step>
  <Step>
    ### Set up the runtime

    Create your CopilotKit endpoint with the configured agent:

    ```typescript
    import { CopilotRuntime, createCopilotEndpoint, InMemoryAgentRunner } from "@copilotkit/runtime";
    import { handle } from "hono/vercel";

    const runtime = new CopilotRuntime({
      agents: {
        default: agent,
      },
      runner: new InMemoryAgentRunner(),
    });

    const app = createCopilotEndpoint({
      runtime,
      basePath: "/api/copilotkit",
    });

    export const GET = handle(app);
    export const POST = handle(app);
    ```
  </Step>
</Steps>

That's it! MCP Apps will now render automatically when the agent uses tools that have associated UI resources.

## Transport Types

The middleware supports two transport types:

### HTTP Transport

For MCP servers using HTTP-based communication:

```typescript
{
  type: "http",
  url: "http://localhost:3101/mcp",
  serverId: "my-http-server"
}
```

### SSE Transport

For MCP servers using Server-Sent Events:

```typescript
{
  type: "sse",
  url: "https://mcp.example.com/sse",
  headers: {
    "Authorization": "Bearer token"
  },
  serverId: "my-sse-server"
}
```

## Threading Support

MCP Apps integrate fully with CopilotKit's threading system:

- **Persistence** - When you save a thread, MCP Apps are stored as part of the conversation history
- **Restoration** - Loading a thread restores all MCP Apps with their original state
- **Server ID stability** - Using consistent `serverId` values ensures MCP Apps load correctly across sessions

## Example MCP Servers

Try these open-source MCP Apps servers to get started:

```bash
git clone https://github.com/anthropics/ext-apps
cd ext-apps
npm install
npm start
```

This starts multiple demo servers with tools like budget allocators, data visualizations, and interactive dashboards.

## Learn More

- [MCP (Agents<->Tools)](/connect-mcp-servers) - Connect to standard MCP servers for tool access
- [Generative UI Specs](/generative-ui-specs) - Compare all supported UI specifications
- [AG-UI Protocol](/ag-ui-protocol) - The underlying protocol powering MCP Apps
