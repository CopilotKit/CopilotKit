---
title: Shared State
icon: "lucide/Repeat"
description: Create a two-way connection between your UI and Mastra agent.
---

Shared State enables seamless synchronization between your application's UI and your Mastra agent's working memory. This creates a powerful two-way connection where your agent can remember information across conversations and your application can influence the agent's context.

## What is Working Memory?

Working memory in Mastra is like an agent's "active thoughts or scratchpad" that maintains persistent information across interactions. It allows agents to:

- **Remember user preferences** and context across conversations
- **Track task progress** and maintain state between interactions  
- **Store structured data** using Zod schemas for type safety
- **Scope memory** to specific threads or across all user interactions

Learn more about [Mastra's Working Memory concept](https://mastra.ai/en/docs/memory/working-memory).

## How CopilotKit Integrates

CopilotKit leverages Mastra's working memory to create reactive shared state between your UI and agent:

- **Read agent state** - Access your agent's working memory in real-time from your React components
- **Write agent state** - Update the agent's working memory from your application UI
- **Reactive updates** - State changes automatically trigger re-renders and agent awareness
- **Type safety** - Full TypeScript support with Zod schema validation

## Implementation Guides

<Cards>
  <Card
    title="Reading Agent State"
    description="Access your agent's working memory in real-time from your React components"
    href="/mastra/shared-state/in-app-agent-read"
    icon="lucide/ArrowLeft"
  />
  <Card
    title="Writing Agent State"
    description="Update your agent's working memory from your application UI"
    href="/mastra/shared-state/in-app-agent-write"
    icon="lucide/ArrowRight"
  />
</Cards>

## Key Benefits

- **Contextual Conversations** - Agents remember important details across interactions
- **UI-Agent Synchronization** - Keep your application state in sync with agent memory
- **Type-Safe State Management** - Leverage Zod schemas for structured data
- **Flexible Scoping** - Choose between thread-scoped or resource-scoped memory

Ready to get started? Check out the [Mastra quickstart](/mastra/quickstart) to set up your agent with working memory.
